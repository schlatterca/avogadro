"use strict";var e,t,n,s=require("@sanity/client/csm");function r(s,r,i,u,o){var a,l,p,c,d,y;const f=o&&"input"in o?o.input:i.value,v=null!=(a=null==o?void 0:o.expected)?a:s.expects,h=null!=(l=null==o?void 0:o.received)?l:function(e){var t,n,s;let r=typeof e;return"object"===r&&(r=null!=(s=e&&(null==(n=null==(t=Object.getPrototypeOf(e))?void 0:t.constructor)?void 0:n.name))?s:"null"),"string"===r?`"${e}"`:"number"===r||"bigint"===r||"boolean"===r?`${e}`:r}(f),g={kind:s.kind,type:s.type,input:f,expected:v,received:h,message:`Invalid ${r}: ${v?`Expected ${v} but r`:"R"}eceived ${h}`,requirement:s.requirement,path:null==o?void 0:o.path,issues:null==o?void 0:o.issues,lang:u.lang,abortEarly:u.abortEarly,abortPipeEarly:u.abortPipeEarly,skipPipe:u.skipPipe},b="schema"===s.kind,k=null!=(y=null!=(d=null!=(c=null!=(p=s.message)?p:function(e,t){var s;return null==(s=null==n?void 0:n.get(e))?void 0:s.get(t)}(s.reference,g.lang))?c:b?(m=g.lang,null==t?void 0:t.get(m)):null)?d:u.message)?y:function(t){return null==e?void 0:e.get(t)}(g.lang);var m;k&&(g.message="function"==typeof k?k(g):k),b&&(i.typed=!1),i.issues?i.issues.push(g):i.issues=[g]}function i(e){return"__proto__"!==e&&"prototype"!==e&&"constructor"!==e}function u(e,t){return{kind:"schema",type:"object",reference:u,expects:"Object",async:!1,entries:e,message:t,_run(e,t){var n;const s=e.value;if(s&&"object"==typeof s){e.typed=!0,e.value={};for(const r in this.entries){const i=s[r],u=this.entries[r]._run({typed:!1,value:i},t);if(u.issues){const o={type:"object",origin:"value",input:s,key:r,value:i};for(const t of u.issues)t.path?t.path.unshift(o):t.path=[o],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=u.issues),t.abortEarly){e.typed=!1;break}}u.typed||(e.typed=!1),(void 0!==u.value||r in s)&&(e.value[r]=u.value)}}else r(this,"type",e,t);return e}}}function o(e,...t){const n={kind:"schema",type:"optional",reference:o,expects:`${e.expects} | undefined`,async:!1,wrapped:e,_run(e,t){return void 0===e.value&&("default"in this&&(e.value=function(e,t,n){return"function"==typeof e.default?e.default(t,n):e.default}(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(n.default=t[0]),n}function a(e){return{kind:"schema",type:"string",reference:a,expects:"string",async:!1,message:e,_run(e,t){return"string"==typeof e.value?e.typed=!0:r(this,"type",e,t),e}}}function l(e){return null!==e&&Array.isArray(e)}function p(e){let t="";for(const n of e)"string"!=typeof n?"number"!=typeof n?l(n)?(t&&(t+=":"),t+=`${n.join(",")}}`):n._key&&(t&&(t+=":"),t+=`${n._key}`):(t&&(t+=":"),t+=`${n}`):(t&&(t+="."),t+=n);return t}const c=function(...e){return{...e[0],pipe:e,_run(t,n){for(let s=0;s<e.length;s++){t=e[s]._run(t,n);const r=e[s+1];if(n.skipPipe||t.issues&&(n.abortEarly||n.abortPipeEarly||"schema"===(null==r?void 0:r.kind)||"transformation"===(null==r?void 0:r.kind))){t.typed=!1;break}}return t}}}(a(),function e(t,n){return{kind:"validation",type:"min_length",reference:e,async:!1,expects:`>=${t}`,requirement:t,message:n,_run(e,t){return e.typed&&e.value.length<this.requirement&&r(this,"length",e,t,{received:`${e.value.length}`}),e}}}(1)),d=o(c),y=u({baseUrl:c,dataset:d,id:c,path:c,projectId:d,tool:d,type:d,workspace:d,isDraft:o(a())});u({origin:c,href:c,data:o(function e(t,n,s){return{kind:"schema",type:"record",reference:e,expects:"Object",async:!1,key:t,value:n,message:s,_run(e,t){var n,s;const u=e.value;if(u&&"object"==typeof u){e.typed=!0,e.value={};for(const r in u)if(i(r)){const i=u[r],o=this.key._run({typed:!1,value:r},t);if(o.issues){const s={type:"record",origin:"key",input:u,key:r,value:i};for(const t of o.issues)t.path=[s],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}const a=this.value._run({typed:!1,value:i},t);if(a.issues){const n={type:"record",origin:"value",input:u,key:r,value:i};for(const t of a.issues)t.path?t.path.unshift(n):t.path=[n],null==(s=e.issues)||s.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}(!o.typed||!a.typed)&&(e.typed=!1),o.typed&&(e.value[o.value]=a.value)}}else r(this,"type",e,t);return e}}}(a(),function e(){return{kind:"schema",type:"unknown",reference:e,expects:"unknown",async:!1,_run:e=>(e.typed=!0,e)}}()))}),exports.z=function(e){const{id:t,path:n,baseUrl:r,tool:i,workspace:u,type:o}=e;return a=e,y._run({typed:!1,value:a},{abortEarly:!0}).issues?void 0:[["id",s.getPublishedId(t)],["type",o],["path",p(s.studioPath.fromString(n))],["base",encodeURIComponent(r)],["workspace",u],["tool",i],["isDraft",t.startsWith("drafts.")]].filter((([,e])=>!!e)).map((e=>{const[t,n]=e;return!0===n?t:e.join("=")})).join(";");var a};//# sourceMappingURL=transformSanityNodeData.cjs.map
