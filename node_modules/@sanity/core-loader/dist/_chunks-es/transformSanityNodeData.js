import{getPublishedId as e,studioPath as t}from"@sanity/client/csm";var n,s,r;function i(e,t,i,u,o){var a,l,p,c,d,y;const f=o&&"input"in o?o.input:i.value,v=null!=(a=null==o?void 0:o.expected)?a:e.expects,h=null!=(l=null==o?void 0:o.received)?l:function(e){var t,n,s;let r=typeof e;return"object"===r&&(r=null!=(s=e&&(null==(n=null==(t=Object.getPrototypeOf(e))?void 0:t.constructor)?void 0:n.name))?s:"null"),"string"===r?`"${e}"`:"number"===r||"bigint"===r||"boolean"===r?`${e}`:r}(f),g={kind:e.kind,type:e.type,input:f,expected:v,received:h,message:`Invalid ${t}: ${v?`Expected ${v} but r`:"R"}eceived ${h}`,requirement:e.requirement,path:null==o?void 0:o.path,issues:null==o?void 0:o.issues,lang:u.lang,abortEarly:u.abortEarly,abortPipeEarly:u.abortPipeEarly,skipPipe:u.skipPipe},k="schema"===e.kind,b=null!=(y=null!=(d=null!=(c=null!=(p=e.message)?p:function(e,t){var n;return null==(n=null==r?void 0:r.get(e))?void 0:n.get(t)}(e.reference,g.lang))?c:k?(m=g.lang,null==s?void 0:s.get(m)):null)?d:u.message)?y:function(e){return null==n?void 0:n.get(e)}(g.lang);var m;b&&(g.message="function"==typeof b?b(g):b),k&&(i.typed=!1),i.issues?i.issues.push(g):i.issues=[g]}function u(e){return"__proto__"!==e&&"prototype"!==e&&"constructor"!==e}function o(e,t){return{kind:"schema",type:"object",reference:o,expects:"Object",async:!1,entries:e,message:t,_run(e,t){var n;const s=e.value;if(s&&"object"==typeof s){e.typed=!0,e.value={};for(const r in this.entries){const i=s[r],u=this.entries[r]._run({typed:!1,value:i},t);if(u.issues){const o={type:"object",origin:"value",input:s,key:r,value:i};for(const t of u.issues)t.path?t.path.unshift(o):t.path=[o],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=u.issues),t.abortEarly){e.typed=!1;break}}u.typed||(e.typed=!1),(void 0!==u.value||r in s)&&(e.value[r]=u.value)}}else i(this,"type",e,t);return e}}}function a(e,...t){const n={kind:"schema",type:"optional",reference:a,expects:`${e.expects} | undefined`,async:!1,wrapped:e,_run(e,t){return void 0===e.value&&("default"in this&&(e.value=function(e,t,n){return"function"==typeof e.default?e.default(t,n):e.default}(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(n.default=t[0]),n}function l(e){return{kind:"schema",type:"string",reference:l,expects:"string",async:!1,message:e,_run(e,t){return"string"==typeof e.value?e.typed=!0:i(this,"type",e,t),e}}}function p(e){return null!==e&&Array.isArray(e)}function c(e){let t="";for(const n of e)"string"!=typeof n?"number"!=typeof n?p(n)?(t&&(t+=":"),t+=`${n.join(",")}}`):n._key&&(t&&(t+=":"),t+=`${n._key}`):(t&&(t+=":"),t+=`${n}`):(t&&(t+="."),t+=n);return t}const d=function(...e){return{...e[0],pipe:e,_run(t,n){for(let s=0;s<e.length;s++){t=e[s]._run(t,n);const r=e[s+1];if(n.skipPipe||t.issues&&(n.abortEarly||n.abortPipeEarly||"schema"===(null==r?void 0:r.kind)||"transformation"===(null==r?void 0:r.kind))){t.typed=!1;break}}return t}}}(l(),function e(t,n){return{kind:"validation",type:"min_length",reference:e,async:!1,expects:`>=${t}`,requirement:t,message:n,_run(e,t){return e.typed&&e.value.length<this.requirement&&i(this,"length",e,t,{received:`${e.value.length}`}),e}}}(1)),y=a(d),f=o({baseUrl:d,dataset:y,id:d,path:d,projectId:y,tool:y,type:y,workspace:y,isDraft:a(l())});function v(n){const{id:s,path:r,baseUrl:i,tool:u,workspace:o,type:a}=n;return l=n,f._run({typed:!1,value:l},{abortEarly:!0}).issues?void 0:[["id",e(s)],["type",a],["path",c(t.fromString(r))],["base",encodeURIComponent(i)],["workspace",o],["tool",u],["isDraft",s.startsWith("drafts.")]].filter((([,e])=>!!e)).map((e=>{const[t,n]=e;return!0===n?t:e.join("=")})).join(";");var l}o({origin:d,href:d,data:a(function e(t,n,s){return{kind:"schema",type:"record",reference:e,expects:"Object",async:!1,key:t,value:n,message:s,_run(e,t){var n,s;const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const i in r)if(u(i)){const u=r[i],o=this.key._run({typed:!1,value:i},t);if(o.issues){const s={type:"record",origin:"key",input:r,key:i,value:u};for(const t of o.issues)t.path=[s],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}const a=this.value._run({typed:!1,value:u},t);if(a.issues){const n={type:"record",origin:"value",input:r,key:i,value:u};for(const t of a.issues)t.path?t.path.unshift(n):t.path=[n],null==(s=e.issues)||s.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}(!o.typed||!a.typed)&&(e.typed=!1),o.typed&&(e.value[o.value]=a.value)}}else i(this,"type",e,t);return e}}}(l(),function e(){return{kind:"schema",type:"unknown",reference:e,expects:"unknown",async:!1,_run:e=>(e.typed=!0,e)}}()))});export{v as z};//# sourceMappingURL=transformSanityNodeData.js.map
