import{i as B,s as b,_ as E}from"./BrI8fkpe.js";import{_ as T}from"./C63KB44R.js";import{F as D,i as k,r as f,o as P,E as q,A as $,T as F,t as r,v as s,x as n,z as L,I as l,G as x,H as w,J as g,a0 as M,a1 as H,_ as C}from"./wnhiutJ0.js";import{g as N}from"./DBO2yGN5.js";const V={key:0,class:"bg-white w-screen h-[100dvh] fixed top-0 left-0"},z={key:1},U={id:"header-component"},G={id:"projectIndex",class:"bg-darkgrey w-auto h-[100dvh] p-20px auto-rows-1em grid-cols-24 text-white flex md:grid flex-col pt-16 md:pt-20vh gap-[16px] md:gap-6px"},J={key:0,id:"mainImg",class:"relative w-full col-start-1 col-span-7 h-[50%] md:h-full"},O=["src"],K={key:1,id:"mainImg",class:"relative w-full col-start-1 col-span-7 h-[50%] md:h-full"},Q=["src"],R=["href"],W=["onMouseover"],X=["innerHTML"],Y=["innerHTML"],Z=n("p",{class:"projectIndexArrow self-center col-start-10 col-span-1 text-right opacity-0 md:group-hover:opacity-100 text-[15px] md:text-base"},null,-1),ee={id:"footer-component",class:"relative l-0 w-screen row-start-[134] row-span-10"},te={methods:{beforeEnter(a){a.style.opacity=0},enter(a,c){a.offsetHeight,a.style.transition="opacity 0.5s",a.style.opacity=1,c()},leave(a,c){a.style.transition="opacity 0.5s",a.style.opacity=0,c()},imageUrlFor(a){return`path/to/images/${a}`}},data(){return{myData:[],hoveredProject:null}}},le=Object.assign(te,{__name:"project-index",setup(a){const c=B(b),j=D();let d=k(()=>j.isMobile);const _=f(!0),u=f([]),m=f(null);let p=f(0);const y=k(()=>!u.value||u.value.length===0?[]:u.value.slice().sort((e,i)=>{const h=new Date(e._createdAt),o=new Date(i._createdAt);return h-o})),S=async()=>{_.value=!0;try{const e=await b.fetch(N`*[_type == "project"]`);u.value=e,console.log(u._value)}catch(e){console.error(e)}finally{_.value=!1}};P(async()=>{await S()});function A(){if(!d.value)return;let e=m.value.querySelectorAll(".singleproject");e.forEach(t=>{t.classList.remove("bg-darkgreyHover"),t.querySelector(".projectIndexArrow").classList.remove("opacity-100")});let i=m.value.scrollTop/(m.value.scrollHeight-m.value.clientHeight),h=1/e.length,o=Math.floor(i/h);o<0?(p.value=0,e[0].classList.add("bg-darkgreyHover"),e[0].querySelector(".projectIndexArrow").classList.add("opacity-100")):o>=0&&o<e.length?(p.value=o,e[o].classList.add("bg-darkgreyHover"),e[o].querySelector(".projectIndexArrow").classList.add("opacity-100")):o<=e.length&&(p.value=o-1,e[o-1].classList.add("bg-darkgreyHover"),e[o-1].querySelector(".projectIndexArrow").classList.add("opacity-100"))}return(e,i)=>{const h=E,o=T;return r(),q(F,{name:"fade",onBeforeEnter:e.beforeEnter,onEnter:e.enter,onLeave:e.leave},{default:$(()=>[_.value?(r(),s("div",V)):(r(),s("div",z,[n("div",U,[L(h)]),n("main",G,[l(d)?g("",!0):(r(),s("div",J,[(r(!0),s(x,null,w(l(y),t=>M((r(),s("figure",{key:t._rev,class:"absolute w-full h-full md:h-auto content-center md:content-[unset]"},[t.homepage_image.asset._ref?(r(),s("img",{key:0,src:l(c).image(t.homepage_image.asset._ref),class:"pic object-cover w-auto md:w-full h-auto max-h-[100%] md:max-h-[unset] md:h-full m-auto md:m-[unset]"},null,8,O)):g("",!0)],512)),[[H,!l(d)&&e.hoveredProject===t._rev]])),128))])),l(d)?(r(),s("div",K,[(r(!0),s(x,null,w(l(y),(t,v)=>M((r(),s("figure",{key:v,class:"absolute w-full h-full md:h-auto content-center md:content-[unset]"},[t.homepage_image_mobile.asset._ref?(r(),s("img",{key:0,src:l(c).image(t.homepage_image_mobile.asset._ref),class:"pic object-cover w-auto md:w-full h-auto max-h-[100%] md:max-h-[unset] md:h-full m-auto md:m-[unset]"},null,8,Q)):g("",!0)],512)),[[H,l(d)&&l(p)===v]])),128))])):g("",!0),n("div",{id:"projectIndexText",class:"relative w-full DM-Mono leading-tight flex flex-col leading-normal col-start-9 col-span-16 overflow-scroll pb-20px h-[50%] md:h-[80dvh]",onScrollPassive:A,ref_key:"indexScroll",ref:m},[(r(!0),s(x,null,w(l(y),(t,v)=>(r(),s("a",{key:t._rev,href:"/progetti/"+t.slug.current,class:C(["border-b-[1px]",{"border-t-[1px]":v===0}])},[n("div",{class:"singleproject inline-grid grid-cols-10 gap-6px items-end group w-full border-white py-2 cursor-pointer md:hover:bg-darkgreyHover",onMouseover:I=>e.hoveredProject=t._rev,onMouseleave:i[0]||(i[0]=I=>e.hoveredProject=null)},[n("p",{innerHTML:t.title,class:"text-[.8rem] md:text-base col-span-6 truncate"},null,8,X),n("p",{innerHTML:t.citta,class:"text-[.6rem] md:text-s col-start-7 col-span-3 truncate"},null,8,Y),Z],40,W)],10,R))),128))],544)]),n("div",ee,[L(o)])]))]),_:1},8,["onBeforeEnter","onEnter","onLeave"])}}});export{le as default};
