import{i as T,s as w,_ as q}from"./BrI8fkpe.js";import{K as E,L as A,r as m,i as B,o as H,F as C,v as a,x as r,z as y,A as z,T as I,t as i,G as D,H as F,J as f,_ as v,I as x}from"./wnhiutJ0.js";import{u as V}from"./ul4IlVxY.js";const j={id:"mainVision"},N=r("div",{id:"headOverlay",class:"transition-opacity duration-[2000ms] opacity-0"},null,-1),O={id:"header-component",class:"z-50"},U={key:0,class:"bg-white w-screen h-[100dvh] fixed top-0 left-0"},$={key:1},G={id:"header-component",class:"pointer-events-none"},J={key:0,class:"text fixed m-0 text-white pointer-events-none text-m DM-Mono z-50 opacity-0 blur-0 transition-all duration-[600ms] left-20px md:left-[calc(calc(23vw+2px))] top-[unset] md:top-[50%] bottom-20px md:bottom-[unset] w-auto md:w-80 max-w-[80vw] md:max-w-[unset]"},K=["innerHTML"],P=["innerHTML"],Q={class:"pic w-full h-full"},R=["src"],W=["src"],X={methods:{beforeEnter(e){e.style.opacity=0},enter(e,p){e.offsetHeight,e.style.transition="opacity 0.5s",e.style.opacity=1,p()},leave(e,p){e.style.transition="opacity 0.5s",e.style.opacity=0,p()},imageUrlFor(e){return`path/to/images/${e}`}}},oe=Object.assign(X,{__name:"vision",setup(e){const{width:p}=E(),L=T(w);A().params.slug;const d=m(!0),_=m([]),n=m(null);let h=B(()=>p.value<=768);V({title:"Cecilia Avogadro",meta:[{name:"description",content:""}]});const S=`*[_type == "vision"]{
    title,
    slides[]{
        _key,
        _type,
        title,
        image,
        image_mobile,
        description,
    }
}[0...50]`,g=o=>L.image(o),k=()=>{d.value=!0,w.fetch(S).then(o=>{d.value=!1,_.value=o[0]},o=>{d.value=!1,console.error(o)})};H(()=>{k(),setTimeout(()=>{document.querySelector("#headOverlay").classList.replace("opacity-0","opacity-100"),n.value.querySelectorAll(".firstBackground")[0].classList.replace("opacity-0","opacity-100"),n.value.querySelectorAll(".firstImage")[0].classList.replace("opacity-0","opacity-100")},1e3),setTimeout(()=>{n.value.querySelectorAll(".text")[0].classList.replace("blur-[20px]","blur-0"),n.value.querySelectorAll(".text")[0].classList.replace("opacity-0","opacity-100"),n.value.classList.replace("overflow-y-hidden","overflow-y-scroll")},3e3)});let b,c=[];C();function M(o){c.length<1&&document.querySelectorAll(".slide").forEach(t=>{c.push(t)}),clearTimeout(b),document.querySelectorAll(".text.blur-0").forEach(t=>{t.classList.replace("blur-0","blur-[20px]")}),document.querySelectorAll(".text.opacity-100").forEach(t=>{t.classList.replace("opacity-100","opacity-0")}),b=setTimeout(()=>{let t=Math.round(n.value.scrollTop/window.innerHeight);if(c[t]&&c[t].querySelector("img:not(.noblur)")){c[t].querySelector("img:not(.noblur)");const l=c[t].querySelector(".text");l&&l.classList.contains("blur-[20px]")&&(l.classList.replace("blur-[20px]","blur-0"),l.classList.replace("opacity-0","opacity-100"))}},200)}return(o,t)=>{const l=q;return i(),a("div",j,[N,r("div",O,[y(l)]),y(I,{name:"fade",onBeforeEnter:o.beforeEnter,onEnter:o.enter,onLeave:o.leave},{default:z(()=>[d.value?(i(),a("div",U)):(i(),a("div",$,[r("div",G,[y(l)]),r("div",{id:"snapContainer",class:"flex flex-col overflow-scroll snap-mandatory snap-y absolute left-0 top-0 w-screen h-[100dvh] select-none overflow-y-hidden",ref_key:"snapContainer",ref:n,onScrollPassive:M},[(i(!0),a(D,null,F(_.value.slides,(s,u)=>(i(),a("div",{key:s._key,class:"slide pic relative snap-start w-screen h-[100dvh] shrink-0 flex gap-20px items-end p-0 overflow-hidden snap-always"},[s.description?(i(),a("div",J,[r("p",{class:"text-xl mb-8",innerHTML:s.title},null,8,K),r("p",{class:"DM-Mono text-m",innerHTML:s.description},null,8,P)])):f("",!0),r("div",{class:v(["absolute bottom-0 left-0 w-full h-full z-[5] pointer-events-none transition-opacity duration-[2000ms]",{"opacity-0":u==0,firstBackground:u==0}]),style:{background:"linear-gradient(to top, rgba(0,0,0,0.4) 30%, rgba(255,255,255,0) 60%)"}},null,2),r("figure",Q,[!x(h)&&s.image?(i(),a("img",{key:0,src:g(s.image.asset),class:v(["pic vision object-cover transition-opacity duration-[2000ms] transform scale-[1.2]",{"opacity-0":u==0,firstImage:u==0}])},null,10,R)):f("",!0),x(h)&&s.image_mobile?(i(),a("img",{key:1,src:g(s.image_mobile.asset),class:v(["pic vision object-cover transition-opacity duration-[2000ms] transform scale-[1.2]",{"opacity-0":u==0,firstImage:u==0}])},null,10,W)):f("",!0)])]))),128))],544)]))]),_:1},8,["onBeforeEnter","onEnter","onLeave"])])}}});export{oe as default};
