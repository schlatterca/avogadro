import{i as T,s as S,_ as A}from"./Br_cZqua.js";import{u as x}from"./DjI_PS2M.js";import{r as I,J as M,o as V,K as k,v as f,x as e,z as B,A as C,T as R,t as g,F as H,G as z,B as y,L as $,H as N,I as W}from"./DWpuE4PC.js";import{g as X}from"./DBO2yGN5.js";const F=window.setInterval,D=e("div",{class:"overlay bg-white",id:"overlay"},null,-1),P={id:"header-component"},Y={key:0,class:"bg-white w-screen h-screen fixed top-0 left-0"},Z={key:1},O={id:"mainHome"},U=e("section",{id:"s_1"},null,-1),G=e("div",{id:"leftArrow",class:"arrow"},null,-1),J=e("div",{id:"rightArrow",class:"arrow"},null,-1),K=e("div",{class:"overlay bg-white",id:"overlay_slide"},null,-1),Q=e("figure",{class:"slide"},[e("img",{src:"https://freight.cargo.site/t/original/i/eb7592ba1f63f887f8bfefe0682439c59867bdf787af1ada187e871fa91a7447/_Z9A3926.jpg"})],-1),j=e("figure",{class:"slide"},[e("img",{src:"https://freight.cargo.site/t/original/i/2a7cd7086a218f34084b4a2bcba1682f8eeec2272068baf14898a753f0279647/_Z9A3936.jpg"})],-1),ee=e("figure",{class:"slide"},[e("img",{src:"https://freight.cargo.site/t/original/i/9f672c4aeda59bf5c45247795ff7f5cf9bbd74b9e5e6043597515054de662b08/_Z9A3872_a.jpg"})],-1),te=[Q,j,ee],se=e("section",{id:"s_3"},[e("p",null,[y("Trasformare uno spazio in un luogo"),e("br"),y(" di senso che faccia star bene chi"),e("br"),y(" ci trascorre del tempo è per me"),e("br"),y(" una gioia, ma non solo: è il mezzo"),e("br"),y(" con cui faccio la mia parte nella"),e("br"),y(" società civile.")])],-1),oe={id:"s_4"},ie=["href"],ne={class:"group"},le={class:"projectName opacity-0 group-hover:opacity-100 transition-opacity duration-500 fixed pointer-events-none cursor-follower"},ae=e("span",{class:"circle"},null,-1),re=["innerHTML"],ce=["src"];x();const de={methods:{beforeEnter(t){t.style.opacity=0},enter(t,o){t.offsetHeight,t.style.transition="opacity 2s",t.style.opacity=1,o()},leave(t,o){t.style.transition="opacity 2s",t.style.opacity=0,o()},imageUrlFor(t){return`path/to/images/${t}`}}};let L,b;setTimeout(()=>{document.querySelectorAll("#s_2 .slide"),document.querySelector("#s_2").classList.contains("inView")&&(L=setTimeout(()=>{E()},3e3))},1e3);function E(){b=F(()=>{const t=document.getElementById("s_2"),o=document.getElementById("overlay_slide");if(o.classList.contains("show"))return;const i=Array.from(t.children).filter(r=>r.classList.contains("slide")),l=i.findIndex(r=>r.getBoundingClientRect().left>=t.getBoundingClientRect().left-10);l<i.length-1&&l+1,o.classList.add("show"),setTimeout(()=>{l<i.length-1?i[l+1].scrollIntoView({behavior:"smooth",inline:"start"}):i[0].scrollIntoView({behavior:"smooth",inline:"start"}),setTimeout(()=>{o.classList.remove("show")},200)},200)},4e3)}const q=t=>{clearTimeout(L),b&&clearInterval(b);const o=t.currentTarget,i=t.clientX,l=t.clientY;document.documentElement.style.setProperty("--mouse-x",`${i}px`),document.documentElement.style.setProperty("--mouse-y",`${l}px`);const r=o.offsetWidth;i<r/2?(document.querySelector("#leftArrow").classList.add("visible"),document.querySelector("#rightArrow").classList.remove("visible")):(document.querySelector("#leftArrow").classList.remove("visible"),document.querySelector("#rightArrow").classList.add("visible")),document.querySelector("#s_2").classList.contains("inView")&&E()},me=()=>{document.querySelector("#leftArrow").classList.remove("visible"),document.querySelector("#rightArrow").classList.remove("visible"),clearTimeout(L),b&&clearInterval(b)},ue=t=>{q(t),L=setTimeout(()=>{E()},4e3)},he=t=>{t.preventDefault();const o=t.currentTarget,i=document.getElementById("overlay_slide");if(i.classList.contains("show"))return;const l=t.clientX-o.getBoundingClientRect().left,r=o.offsetWidth,a=Array.from(o.children).filter(v=>v.classList.contains("slide")),c=a.findIndex(v=>v.getBoundingClientRect().left>=o.getBoundingClientRect().left-10);l<r/2?c>0?c-1:a.length-1:c<a.length-1&&c+1,i.classList.add("show"),setTimeout(()=>{l<r/2?c>0?a[c-1].scrollIntoView({behavior:"instant",inline:"start"}):a[a.length-1].scrollIntoView({behavior:"instant",inline:"start"}):c<a.length-1?a[c+1].scrollIntoView({behavior:"instant",inline:"start"}):a[0].scrollIntoView({behavior:"instant",inline:"start"}),setTimeout(()=>{i.classList.remove("show")},300)},200)},_e=Object.assign(de,{__name:"index",setup(t){const o=T(S),i=I(!0),l=I([]),r=M(),a=async()=>{i.value=!0;try{const n=await S.fetch(X`*[_type == "project"]`);l.value=n}catch(n){console.error(n)}finally{i.value=!1}},c=()=>{const n=["#723137","#7d91a0","#c3c2be"],_=n[Math.floor(Math.random()*n.length)],d=document.getElementById("s_1");d?d.style.backgroundColor=_:console.error("Element not found!")},v=()=>{const n=new IntersectionObserver(d=>{d.forEach(s=>{s.target.getAttribute("id");const h=document.querySelector("#spansRow"),w=document.querySelectorAll("#head a.first"),p=document.querySelectorAll("#head a.menu"),u=document.querySelectorAll("#head a.main");s.isIntersecting&&(s.target.id=="s_2"?s.target.classList.add("inView"):document.getElementById("s_2").classList.remove("inView"),s.target.id=="s_4"?(h.classList.add("visible"),p.forEach(m=>{m.classList.add("visible")}),document.querySelector("#head p.arch").classList.add("invisible"),u[0].classList.add("small"),u[1].classList.add("small"),document.querySelector("#head a.blankSpace").classList.add("invisible"),document.querySelector("#head a.first").classList.add("invisible")):(h.classList.remove("visible"),p.forEach(m=>{m.classList.remove("visible")}),document.querySelector("#head p.arch").classList.remove("invisible"),u[0].classList.remove("small"),u[1].classList.remove("small"),document.querySelector("#head a.blankSpace").classList.remove("invisible"),document.querySelector("#head a.first").classList.remove("invisible")),s.target.id=="s_4"?(document.getElementById("head").style.color="white",document.getElementById("head").style.mixBlendMode="difference",document.getElementById("head").classList.add("s4")):s.target.id=="s_1"?(document.getElementById("head").style.color="white",document.getElementById("head").style.mixBlendMode="normal",document.getElementById("head").classList.remove("s4"),w.forEach(m=>{m.style.opacity="1",m.style.pointerEvents="auto"}),u[0].classList.remove("show-dot"),u[1].classList.remove("show-dot")):(document.getElementById("head").style.color="black",document.getElementById("head").style.mixBlendMode="normal",w.forEach(m=>{m.style.opacity="0",m.style.pointerEvents="none"}),u[0].classList.add("show-dot"),u[1].classList.add("show-dot")))})},{threshold:.5});document.querySelectorAll('section[id^="s_"]').forEach(d=>{n.observe(d)})};return V(async()=>{await a(),await k(),c(),v();const n=()=>{const s=r.hash;if(s){const h=document.querySelector(s);h&&(document.getElementById("overlay").classList.add("show"),h.scrollIntoView({behavior:"smooth"}),setTimeout(()=>{document.getElementById("overlay").classList.remove("show")},1e3))}};setTimeout(()=>{n()});const _=document.querySelectorAll(".cursor-follower"),d=s=>{const h=s.clientX,w=s.clientY;_.forEach(p=>{p.style.left=`${h}px`,p.style.top=`${w}px`})};document.addEventListener("mousemove",d)}),(n,_)=>{const d=A;return g(),f("div",null,[D,e("div",P,[B(d)]),B(R,{name:"fade",onBeforeEnter:n.beforeEnter,onEnter:n.enter,onLeave:n.leave},{default:C(()=>[i.value?(g(),f("div",Y)):(g(),f("div",Z,[e("main",O,[U,G,J,K,e("section",{id:"s_2",onMousemove:q,onMouseleave:me,onMouseenter:ue,onClick:he},te,32),se,e("section",oe,[(g(!0),f(H,null,z(l.value,s=>(g(),f("a",{key:s._key,href:"/progetti/"+s.slug.current,class:"flex",style:$(s.gridSpan?{gridColumn:s.gridSpan.columnStart+" / span "+s.gridSpan.columnSpan,gridRow:s.gridSpan.rowStart+" / span "+s.gridSpan.rowSpan}:{})},[e("figure",ne,[e("p",le,[ae,e("span",{innerHTML:s.title},null,8,re)]),s.homepage_image?(g(),f("img",{key:0,src:N(o).image(s.homepage_image),class:"pic w-full h-full object-cover"},null,8,ce)):W("",!0)])],12,ie))),128))])])]))]),_:1},8,["onBeforeEnter","onEnter","onLeave"])])}}});export{_e as default};
