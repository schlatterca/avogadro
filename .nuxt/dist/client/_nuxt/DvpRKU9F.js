import{i as z,s as S,_ as $}from"./BONjJ-zX.js";import{u as N}from"./CmkwWcGW.js";import{r as b,o as C,J as W,K as X,v as m,x as s,z as q,A as D,T as F,t as h,F as I,G as x,B as g,H as k,I as A,L as P}from"./CrCovwsK.js";import{g as M}from"./DBO2yGN5.js";const Y=window.setInterval,O=s("div",{class:"overlay bg-white",id:"overlay"},null,-1),U={id:"header-component"},G={key:0,class:"bg-white w-screen h-screen fixed top-0 left-0"},J={key:1},K={id:"mainHome"},Q=s("section",{id:"s_1"},null,-1),Z=s("div",{id:"leftArrow",class:"arrow"},null,-1),j=s("div",{id:"rightArrow",class:"arrow"},null,-1),ee=s("div",{class:"overlay bg-white",id:"overlay_slide"},null,-1),te={key:0,class:"slide"},se=["src"],oe=s("section",{id:"s_3"},[s("p",null,[g("Trasformare uno spazio in un luogo"),s("br"),g(" di senso che faccia star bene chi"),s("br"),g(" ci trascorre del tempo è per me"),s("br"),g(" una gioia, ma non solo: è il mezzo"),s("br"),g(" con cui faccio la mia parte nella"),s("br"),g(" società civile.")])],-1),ne={id:"s_4"},ie=["href"],le={class:"group"},ae={class:"projectName opacity-0 group-hover:opacity-100 transition-opacity duration-500 fixed pointer-events-none cursor-follower"},re=s("span",{class:"circle"},null,-1),ce=["innerHTML"],de=["src"];N();const ue={methods:{beforeEnter(t){t.style.opacity=0},enter(t,i){t.offsetHeight,t.style.transition="opacity 2s",t.style.opacity=1,i()},leave(t,i){t.style.transition="opacity 2s",t.style.opacity=0,i()},imageUrlFor(t){return`path/to/images/${t}`}}};let E,w;const B=b(null);C(()=>{setTimeout(()=>{B.value&&(B.value.querySelectorAll(".slide"),B.value.classList.contains("inView")&&(E=setTimeout(()=>{T()},3e3)))},1e3)});function T(){w=Y(()=>{const t=document.getElementById("s_2"),i=document.getElementById("overlay_slide");if(i.classList.contains("show"))return;const o=Array.from(t.children).filter(a=>a.classList.contains("slide")),l=o.findIndex(a=>a.getBoundingClientRect().left>=t.getBoundingClientRect().left-10);l<o.length-1&&l+1,i.classList.add("show"),setTimeout(()=>{l<o.length-1?o[l+1].scrollIntoView({behavior:"smooth",inline:"start"}):o[0].scrollIntoView({behavior:"smooth",inline:"start"}),setTimeout(()=>{i.classList.remove("show")},300)},200)},4e3)}const V=t=>{clearTimeout(E),w&&clearInterval(w);const i=t.currentTarget,o=t.clientX,l=t.clientY;document.documentElement.style.setProperty("--mouse-x",`${o}px`),document.documentElement.style.setProperty("--mouse-y",`${l}px`);const a=i.offsetWidth;o<a/2?(document.querySelector("#leftArrow").classList.add("visible"),document.querySelector("#rightArrow").classList.remove("visible")):(document.querySelector("#leftArrow").classList.remove("visible"),document.querySelector("#rightArrow").classList.add("visible")),document.querySelector("#s_2").classList.contains("inView")&&T()},me=()=>{document.querySelector("#leftArrow").classList.remove("visible"),document.querySelector("#rightArrow").classList.remove("visible"),clearTimeout(E),w&&clearInterval(w)},he=t=>{V(t),E=setTimeout(()=>{T()},4e3)},ye=t=>{t.preventDefault();const i=t.currentTarget,o=document.getElementById("overlay_slide");if(o.classList.contains("show"))return;const l=t.clientX-i.getBoundingClientRect().left,a=i.offsetWidth,r=Array.from(i.children).filter(v=>v.classList.contains("slide")),c=r.findIndex(v=>v.getBoundingClientRect().left>=i.getBoundingClientRect().left-10);l<a/2?c>0?c-1:r.length-1:c<r.length-1&&c+1,o.classList.add("show"),setTimeout(()=>{l<a/2?c>0?r[c-1].scrollIntoView({behavior:"instant",inline:"start"}):r[r.length-1].scrollIntoView({behavior:"instant",inline:"start"}):c<r.length-1?r[c+1].scrollIntoView({behavior:"instant",inline:"start"}):r[0].scrollIntoView({behavior:"instant",inline:"start"}),setTimeout(()=>{o.classList.remove("show")},300)},200)},pe=Object.assign(ue,{__name:"index",setup(t){const i=z(S),o=b(!0),l=b([]),a=b([]),r=W(),c=async()=>{o.value=!0;try{const n=await S.fetch(M`*[_type == "project"]`);l.value=n,console.log(l)}catch(n){console.error(n)}finally{o.value=!1}},v=async()=>{o.value=!0;try{const n=await S.fetch(M`*[_type == "homepage"]`);a.value=n,console.log(a)}catch(n){console.error(n)}finally{o.value=!1}},R=()=>{const n=["#723137","#7d91a0","#c3c2be"],_=n[Math.floor(Math.random()*n.length)],d=document.getElementById("s_1");d?d.style.backgroundColor=_:console.error("Element not found!")},H=()=>{const n=new IntersectionObserver(d=>{d.forEach(e=>{e.target.getAttribute("id");const f=document.querySelector("#spansRow"),L=document.querySelectorAll("#head a.first"),p=document.querySelectorAll("#head a.menu"),y=document.querySelectorAll("#head a.main");e.isIntersecting&&(e.target.id=="s_2"?e.target.classList.add("inView"):document.getElementById("s_2").classList.remove("inView"),e.target.id=="s_4"?(f.classList.add("visible"),p.forEach(u=>{u.classList.add("visible")}),document.querySelector("#head p.arch").classList.add("invisible"),y[0].classList.add("small"),y[1].classList.add("small"),document.querySelector("#head a.blankSpace").classList.add("invisible"),document.querySelector("#head a.first").classList.add("invisible")):(f.classList.remove("visible"),p.forEach(u=>{u.classList.remove("visible")}),document.querySelector("#head p.arch").classList.remove("invisible"),y[0].classList.remove("small"),y[1].classList.remove("small"),document.querySelector("#head a.blankSpace").classList.remove("invisible"),document.querySelector("#head a.first").classList.remove("invisible")),e.target.id=="s_4"?(document.getElementById("head").style.color="white",document.getElementById("head").style.mixBlendMode="difference",document.getElementById("head").classList.add("s4")):e.target.id=="s_1"?(document.getElementById("head").style.color="white",document.getElementById("head").style.mixBlendMode="normal",document.getElementById("head").classList.remove("s4"),L.forEach(u=>{u.style.opacity="1",u.style.pointerEvents="auto"}),y[0].classList.remove("show-dot"),y[1].classList.remove("show-dot")):(document.getElementById("head").style.color="black",document.getElementById("head").style.mixBlendMode="normal",L.forEach(u=>{u.style.opacity="0",u.style.pointerEvents="none"}),y[0].classList.add("show-dot"),y[1].classList.add("show-dot")))})},{threshold:.5});document.querySelectorAll('section[id^="s_"]').forEach(d=>{n.observe(d)})};return C(async()=>{await c(),await v(),await X(),R(),H();const n=()=>{const e=r.hash;if(e){const f=document.querySelector(e);f&&(document.getElementById("overlay").classList.add("show"),f.scrollIntoView({behavior:"smooth"}),setTimeout(()=>{document.getElementById("overlay").classList.remove("show")},1e3))}};setTimeout(()=>{n()});const _=document.querySelectorAll(".cursor-follower"),d=e=>{const f=e.clientX,L=e.clientY;_.forEach(p=>{p.style.left=`${f}px`,p.style.top=`${L}px`})};document.addEventListener("mousemove",d)}),(n,_)=>{const d=$;return h(),m("div",null,[O,s("div",U,[q(d)]),q(F,{name:"fade",onBeforeEnter:n.beforeEnter,onEnter:n.enter,onLeave:n.leave},{default:D(()=>[o.value?(h(),m("div",G)):(h(),m("div",J,[s("main",K,[Q,Z,j,ee,s("section",{id:"s_2",ref:"sectionTwo",onMousemove:V,onMouseleave:me,onMouseenter:he,onClick:ye},[(h(!0),m(I,null,x(l.value.slides,e=>(h(),m(I,{key:e._key},[e.image?(h(),m("figure",te,[s("img",{src:k(i).image(e.image.asset)},null,8,se)])):A("",!0)],64))),128))],544),oe,s("section",ne,[(h(!0),m(I,null,x(l.value,e=>(h(),m("a",{key:e._key,href:"/progetti/"+e.slug.current,class:"flex",style:P(e.gridSpan?{gridColumn:e.gridSpan.columnStart+" / span "+e.gridSpan.columnSpan,gridRow:e.gridSpan.rowStart+" / span "+e.gridSpan.rowSpan}:{})},[s("figure",le,[s("p",ae,[re,s("span",{innerHTML:e.title},null,8,ce)]),e.homepage_image?(h(),m("img",{key:0,src:k(i).image(e.homepage_image),class:"pic w-full h-full object-cover"},null,8,de)):A("",!0)])],12,ie))),128))])])]))]),_:1},8,["onBeforeEnter","onEnter","onLeave"])])}}});export{pe as default};
