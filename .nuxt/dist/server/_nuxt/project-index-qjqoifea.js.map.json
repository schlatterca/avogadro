{"file":"project-index-qjqoifea.js","mappings":";;;;;;;;;;;;;;;;;;;;;;AA2JA,MAAA,cAAe;AAAA,EACb,SAAS;AAAA,IACP,YAAY,IAAI;AACd,SAAG,MAAM,UAAU;AAAA,IACpB;AAAA,IACD,MAAM,IAAI,MAAM;AACd,SAAG;AACH,SAAG,MAAM,aAAa;AACtB,SAAG,MAAM,UAAU;AACnB;IACD;AAAA,IACD,MAAM,IAAI,MAAM;AACd,SAAG,MAAM,aAAa;AACtB,SAAG,MAAM,UAAU;AACnB;IACD;AAAA,IACD,YAAY,OAAO;AACjB,aAAO,kBAAkB,KAAK;AAAA,IAC/B;AAAA,EACF;AAAA,EAED,OAAO;AACL,WAAO;AAAA,MACL,QAAQ;AAAA;AAAA,MAEP;AAAA,MACD,gBAAgB;AAAA,IACtB;AAAA,EACG;AACH;;;;;AAvGA,UAAM,eAAe,gBAAgB,MAAM;AAC3C,UAAM,QAAQ,WAAU;AACxB,QAAI,WAAW,SAAS,MAAM,MAAM,QAAQ;AAE5C,UAAM,UAAU,IAAI,IAAI;AACxB,UAAM,SAAS,IAAI,CAAA,CAAE;AACD,QAAI,IAAI;AAE5B,QAAI,kBAAkB,IAAI,CAAC;AAE3B,UAAM,iBAAiB,SAAS,MAAM;AAEpC,UAAI,CAAC,OAAO,SAAS,OAAO,MAAM,WAAW,EAAG,QAAO;AAGvD,aAAO,OAAO,MAAM,MAAK,EAAG,KAAK,CAAC,GAAG,MAAM;AACzC,cAAM,QAAQ,IAAI,KAAK,EAAE,UAAU;AACnC,cAAM,QAAQ,IAAI,KAAK,EAAE,UAAU;AACnC,eAAO,QAAQ;AAAA,MACnB,CAAG;AAAA,IACH,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["../../../../pages/project-index.vue"],"sourcesContent":["<template>\n\n    <transition name=\"fade\" @before-enter=\"beforeEnter\" @enter=\"enter\" @leave=\"leave\">\n        <div v-if=\"loading\" class=\"bg-white w-screen h-[100dvh] fixed top-0 left-0\"></div>\n        <div v-else>\n            <div id=\"header-component\">\n                <Header></Header>\n            </div>\n            <main id=\"projectIndex\" class=\"bg-darkgrey w-auto h-[100dvh] p-20px\n            auto-rows-1em grid-cols-24 text-white\n            flex md:grid flex-col pt-16 md:pt-20vh gap-[16px] md:gap-6px\">\n\n                <!-- DESKTOP -->\n                <div v-if=\"!isMobile\" id=\"mainImg\" class=\"relative w-full col-start-1 col-span-7\n                h-[50%] md:h-full\">\n                    <template v-for=\"project in sortedProjects\" :key=\"project._rev\">\n                        <figure class=\"absolute w-full\n                        h-full md:h-auto content-center md:content-[unset]\"\n                        v-show=\"(!isMobile && hoveredProject === project._rev)\">\n                            <img v-if=\"project.homepage_image.asset._ref\"\n                                :src=\"imageBuilder.image (project.homepage_image.asset._ref)\"\n                                class=\"pic object-cover\n                                w-auto md:w-full h-auto max-h-[100%] md:max-h-[unset] md:h-full m-auto md:m-[unset]\"/>\n                        </figure>\n                    </template>\n                </div>\n\n                <!-- MOBILE -->\n                <div v-if=\"isMobile\" id=\"mainImg\" class=\"relative w-full col-start-1 col-span-7\n                h-[50%] md:h-full\">\n                    <template v-for=\"(project, index) in sortedProjects\" :key=\"index\">\n                        <figure class=\"absolute w-full\n                        h-full md:h-auto content-center md:content-[unset]\"\n                        v-show=\"(isMobile && scrolledProject === index)\">\n                            <img v-if=\"project.homepage_image_mobile.asset._ref\"\n                                :src=\"imageBuilder.image (project.homepage_image_mobile.asset._ref)\"\n                                class=\"pic object-cover\n                                w-auto md:w-full h-auto max-h-[100%] md:max-h-[unset] md:h-full m-auto md:m-[unset]\"/>\n                        </figure>\n                    </template>\n                </div>\n\n                <div id=\"projectIndexText\" class=\"relative w-full DM-Mono leading-tight\n                flex flex-col leading-normal col-start-9 col-span-16 overflow-scroll pb-20px\n                h-[50%] md:h-[80dvh]\"\n                @scroll.passive=\"indexScrollMobile\"\n                ref=\"indexScroll\">\n                    <template v-for=\"(project, index) in sortedProjects\" :key=\"project._rev\">\n                        <a v-bind:href=\"'/progetti/'+ project.slug.current\"\n                        class=\"border-b-[1px]\"\n                        :class=\"{ 'border-t-[1px]': index === 0 }\">\n                          <div class=\"singleproject inline-grid grid-cols-10 gap-6px items-end group\n                          w-full border-white py-2 cursor-pointer md:hover:bg-darkgreyHover\"\n                          @mouseover=\"hoveredProject = project._rev\"\n                          @mouseleave=\"hoveredProject = null\">\n                              <p v-html=\"project.title\" class=\"text-[.8rem] md:text-base col-span-6 truncate\"></p>\n                              <p v-html=\"project.citta\" class=\"text-[.6rem] md:text-s col-start-7 col-span-3 truncate\"></p>\n                              <p class=\"projectIndexArrow self-center col-start-10 col-span-1 text-right\n                              opacity-0 md:group-hover:opacity-100 text-[15px] md:text-base\"></p>\n                          </div>\n                        </a>\n                    </template>\n                </div>\n            </main>\n\n            <div id=\"footer-component\" class=\"relative l-0 w-screen row-start-[134] row-span-10\">\n              <Footer></Footer>\n            </div>\n\n        </div>\n    </transition>\n</template>\n  \n\n<script setup>\nimport { ref, onMounted, nextTick } from 'vue';\nimport sanity from \"../sanity/sanity.js\";\nimport imageUrlBuilder from \"@sanity/image-url\";\nimport groq from \"groq\"; // Ensure you have groq imported if used in your setup\nimport { useMyStore } from '../store/store.js';\n\nconst imageBuilder = imageUrlBuilder(sanity);\nconst store = useMyStore();\nlet isMobile = computed(() => store.isMobile)\n\nconst loading = ref(true);\nconst myData = ref([]);\nconst indexScroll = ref(null)\n\nlet scrolledProject = ref(0);\n\nconst sortedProjects = computed(() => {\n  // Check if myData is defined and not empty\n  if (!myData.value || myData.value.length === 0) return [];\n\n  // Sort projects by the creation date in descending order\n  return myData.value.slice().sort((a, b) => {\n    const dateA = new Date(a._createdAt);\n    const dateB = new Date(b._createdAt);\n    return dateA - dateB;  // For descending order\n  });\n});\n//console.log(sortedProjects)\n\nconst fetchData = async () => {\n    loading.value = true;\n    try {\n      const data = await sanity.fetch(groq`*[_type == \"project\"]`);\n      myData.value = data;\n      console.log(myData._value);\n    } catch (error) {\n      console.error(error);\n    } finally {\n      loading.value = false;\n    }\n};\n\nonMounted(async () => {\n    await fetchData();\n});\n\nfunction indexScrollMobile() {\n  if(!isMobile.value){return}\n\n  let elements = indexScroll.value.querySelectorAll('.singleproject');\n\n  elements.forEach(span => {\n    span.classList.remove('bg-darkgreyHover');\n    span.querySelector('.projectIndexArrow').classList.remove('opacity-100');\n  });\n\n  let percent = indexScroll.value.scrollTop / (indexScroll.value.scrollHeight - indexScroll.value.clientHeight);\n  let steps = 1 / elements.length;\n  let actualStep = Math.floor(percent/steps);\n\n  //console.log(percent, steps, actualStep, scrolledProject.value);\n  \n  if(actualStep < 0){\n    scrolledProject.value = 0;\n    elements[0].classList.add('bg-darkgreyHover');\n    elements[0].querySelector('.projectIndexArrow').classList.add('opacity-100');\n  } else if((actualStep >= 0)&&(actualStep < elements.length)){\n    scrolledProject.value = actualStep;\n    elements[actualStep].classList.add('bg-darkgreyHover');\n    elements[actualStep].querySelector('.projectIndexArrow').classList.add('opacity-100');\n  } else if(actualStep <= elements.length) {\n    scrolledProject.value = actualStep - 1;\n    elements[actualStep - 1].classList.add('bg-darkgreyHover');\n    elements[actualStep - 1].querySelector('.projectIndexArrow').classList.add('opacity-100');\n  }\n\n}\n</script>\n\n<script>\nexport default {\n  methods: {\n    beforeEnter(el) {\n      el.style.opacity = 0;\n    },\n    enter(el, done) {\n      el.offsetHeight; // Trigger reflow\n      el.style.transition = 'opacity 0.5s';\n      el.style.opacity = 1;\n      done();\n    },\n    leave(el, done) {\n      el.style.transition = 'opacity 0.5s';\n      el.style.opacity = 0;\n      done();\n    },\n    imageUrlFor(image) {\n      return `path/to/images/${image}`;\n    }\n  },\n\n  data() {\n    return {\n      myData: [\n        // Your project data here\n      ],\n      hoveredProject: null\n    };\n  }\n};\n</script>\n\n"],"version":3}